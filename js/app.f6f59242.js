(function(){"use strict";var e={2570:function(e,t,a){var s=a(6369),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"container"},[t("app-header"),t("router-view")],1)])},i=[],o=function(){var e=this,t=e._self._c;return t("header",{staticClass:"header"},[t("div",{staticClass:"logo-wrap"},[t("router-link",{attrs:{to:"/"}},[t("img",{staticClass:"logo",attrs:{src:a(695),alt:"site logo (miny owl)"}})])],1),t("h1",{staticClass:"site-name"},[e._v("Feather Weather")]),t("nav",[t("router-link",{attrs:{to:"/"}},[e._v("Weather page")]),e._v(" | "),t("router-link",{attrs:{to:"/chosen"}},[e._v("Chosen page")])],1)])},r=[],l=a(1001),d={},c=(0,l.Z)(d,o,r,!1,null,"08c18ee3",null),h=c.exports,p={components:{AppHeader:h}},u=p,m=(0,l.Z)(u,n,i,!1,null,null,null),w=m.exports,y=a(2631),C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"weather-page"},[t("custom-modal",{ref:"modalRef"},[t("div",[t("div",[e._v(" Are you sure that you want to delete this component? ")]),t("button",{staticClass:"modal-delete-btn",on:{click:e.deleteComponent}},[e._v(" Yes ")])])]),t("div",{staticClass:"weather-page__wrapper"},[t("main",{staticClass:"weather-page__main-wrap"},[e._l(e.components,(function(a,s){return t("weather-component",{key:a.hash,staticClass:"weather-component",attrs:{componentIndex:s},on:{"delete-component":function(t){return e.triggerDeleteComponentModal(s)}}})})),t("div",{staticClass:"add-component__btn-wrap"},[t("button",{staticClass:"add-component-btn",on:{click:e.createNewComponent}},[t("i",{staticClass:"fas fa-plus"})])])],2)])],1)},f=[],g=(a(560),function(){var e=this,t=e._self._c;return t("div",{staticClass:"weather-component__wrap"},[t("custom-modal"),t("button",{staticClass:"delete-btn",on:{click:e.deleteComponent}},[t("i",{staticClass:"fa fa-trash-can"})]),t("div",{staticClass:"weather-component__inside-wrap"},[e.displayInput?t("city-search-input",{attrs:{componentIndex:e.componentIndex,currentUsersCity:e.currentUsersCity,chosenPage:e.chosenPage},on:{sendWeatherData:e.handleWeatherData}}):e._e(),e.displayLoadSpinner?t("div",{staticClass:"load-spinner__wrap"},[t("loading-spinner")],1):e._e(),e.weatherData?t("weather-display",{attrs:{"weather-data":e.weatherData}}):e._e()],1)],1)}),_=[],v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"city-search"},[t("custom-modal"),t("div",{staticClass:"city-search__wrap"},[t("div",{staticClass:"city-search__input"},[t("div",{staticClass:"input__inside-wrap"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],attrs:{placeholder:"Enter your city name"},domProps:{value:e.searchInput},on:{mousedown:e.showDropdown,focus:e.showDropdown,blur:e.hideDropdown,input:[function(t){t.target.composing||(e.searchInput=t.target.value)},e.handleInputChange]}}),t("button",{staticClass:"city-search__btn",attrs:{disabled:e.searchInput.length<2},on:{click:e.searchWeather}},[e._v("Search")])]),e.searchResults.length>0&&e.searchInput.length>0?t("ul",{directives:[{name:"show",rawName:"v-show",value:e.dropdownVisible,expression:"dropdownVisible"}],staticClass:"dropdown exclude-blur"},e._l(e.searchResults,(function(a){return t("li",{key:a.geonameId,staticClass:"exclude-blur",on:{click:function(t){return e.selectCity(a)}}},[e._v(" "+e._s(a)+" ")])})),0):e._e()])]),t("add-to-chosen",{staticClass:"add-to-chosen",attrs:{disabled:!e.isSearchValid,isChosen:e.addedToChosen},on:{addToChosen:e.addToChosenCities}})],1)},b=[],k=a(1076),x=function(){var e=this,t=e._self._c;return t("div",[e.isChosen?e._e():t("button",{class:{_disabled:e.disabled},attrs:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.addToChosen.apply(null,arguments)}}},[t("i",{staticClass:"fas fa-plus"}),e._v(" Add to Chosen ")]),e.isChosen?t("button",{staticClass:"chosen",on:{click:function(t){return t.stopPropagation(),e.removeFromChosen.apply(null,arguments)}}},[t("i",{staticClass:"fas fa-minus"}),e._v(" Added to Chosen! ")]):e._e()])},D=[],W={props:{isChosen:Boolean,disabled:Boolean},methods:{addToChosen(){this.$emit("addToChosen")},removeFromChosen(){this.$emit("removeFromChosen")}}},S=W,T=(0,l.Z)(S,x,D,!1,null,"bb625826",null),I=T.exports,M=function(){var e=this,t=e._self._c;return e.showModal?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal"},[t("div",{staticClass:"modal__content"},[t("div",{staticClass:"modal__main-part"},[e._v(" "+e._s(e.passedData)+" ")]),e.isSlotVisible?t("div",{staticClass:"modal-slot"},[e._t("default")],2):e._e(),t("div",{staticClass:"close-modal",on:{click:e.closeModal}},[t("i",{staticClass:"fas fa-times"})])])])]):e._e()},P=[],L={data(){return{showModal:!1,passedData:null,isSlotVisible:!0}},methods:{openModal(e){this.passedData=e,this.passedData?this.isSlotVisible=!1:this.isSlotVisible=!0,this.showModal=!0},closeModal(){this.showModal=!1}},created(){this.$parent.$on("open-modal",this.openModal)},beforeDestroy(){this.$parent.$off("open-modal",this.openModal)}},V=L,F=(0,l.Z)(V,M,P,!1,null,"9aeb5b90",null),$=F.exports,O={components:{AddToChosen:I,CustomModal:$},props:{chosenPage:{type:Boolean,default:!1},componentIndex:{type:Number,default:null},currentUsersCity:{type:String,default:null}},data(){return{searchedCity:"",searchInput:"",searchResults:[],chosenCities:JSON.parse(localStorage.getItem("chosenCities"))||[],isSearchValid:!1,addedToChosen:!1,dropdownVisible:!0}},methods:{hideDropdown(){setTimeout((()=>this.dropdownVisible=!1),300)},showDropdown(){this.dropdownVisible=!0},openModal(e){this.$emit("open-modal",e)},async handleInputChange(){const e={method:"GET",url:"https://wft-geo-db.p.rapidapi.com/v1/geo/cities",params:{namePrefix:this.searchInput},headers:{"X-RapidAPI-Key":"d0019c55e3msh09ebf5eb98ff5c0p18c47bjsn2601faa7685e","X-RapidAPI-Host":"wft-geo-db.p.rapidapi.com"}};try{const t=await k.Z.request(e);this.searchResults=t.data.data.map((e=>e.city)),console.log(this.searchResults)}catch(t){this.openModal("Seems something went wrong")}},selectCity(e){this.searchInput=e,this.searchResults=[]},addToChosenCities(){(this.searchedCity||this.isSearchValid)&&(this.chosenCities.length>4?this.openModal("You have too many chosen cities, delete one or more."):(this.addedToChosen=!0,this.chosenCities.push(0!==this.componentIndex||this.chosenPage||this.searchedCity?this.searchedCity:this.currentUsersCity),localStorage.setItem("chosenCities",JSON.stringify(this.chosenCities))))},searchWeather(){const e="d5c10c96e44dec1bad116a142f8a817c",t=`https://api.openweathermap.org/data/2.5/forecast?q=${encodeURIComponent(this.searchInput)}&units=metric&appid=${e}`;k.Z.get(t).then((e=>{this.$emit("sendWeatherData",e.data),this.searchResults=[],this.isSearchValid=!0,this.searchedCity=this.searchInput,this.addedToChosen=!1})).catch((e=>{this.openModal(`No results for ${this.searchInput}. Check if city name correct. ${e}`),this.isSearchValid=!1}))}},mounted(){this.chosenPage||0!==this.componentIndex?this.isSearchValid=!1:this.isSearchValid=!0}},Z=O,A=(0,l.Z)(Z,v,b,!1,null,null,null),H=A.exports,N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"weather-display"},[t("div",{staticClass:"weather-display__day-switcher"},[t("button",{class:{active:"day"===e.currentView},on:{click:function(t){return e.switchView("day")}}},[e._v("Today")]),t("button",{class:{active:"week"===e.currentView},on:{click:function(t){return e.switchView("week")}}},[e._v("Week")])]),"day"===e.currentView||e.windowWidth<=767?t("div",[t("div",{staticClass:"weather-display__block"},[t("h3",{staticClass:"block__text"},[e._v(e._s(e.currentCityName)+", "+e._s((new Date).toLocaleDateString()))]),t("p",{staticClass:"block__temp"},[e._v("Temperature: "+e._s(Math.floor(e.averageWeatherToday.avgTemp))+"°C")]),t("p",{staticClass:"block__feels"},[e._v("Feels Like: "+e._s(Math.floor(e.averageWeatherToday.avgFeelsLike))+"°C")]),t("p",{staticClass:"block__humidity"},[e._v("Humidity: "+e._s(e.averageWeatherToday.minHumidity)+" - "+e._s(e.averageWeatherToday.maxHumidity)+"%")]),t("p",{staticClass:"block__wind"},[e._v("Wind Speed: "+e._s(e.averageWeatherToday.minWind.toFixed(2))+" - "+e._s(e.averageWeatherToday.maxWind.toFixed(2))+" m/s")])])]):"week"===e.currentView&&e.windowWidth>767?t("div",[t("div",{staticClass:"weather-display__block"},[t("div",{staticClass:"block__name"},[e._v(e._s(e.currentCityName)+" ")]),t("div",{staticClass:"block__column-wrap _week"},e._l(e.weeklyAverage,(function(a){return t("div",{key:a.date,staticClass:"block__column"},[t("h3",{staticClass:"block__text"},[e._v(e._s(new Date(a.day).toLocaleDateString()))]),t("p",{staticClass:"block__temp"},[e._v("Temp.: "+e._s(a.averageTemp.toFixed(2))+"°C")]),t("p",{staticClass:"block__feels"},[e._v("Feels Like: "+e._s(a.averageFeelsLike.toFixed(2))+"°C")]),t("p",{staticClass:"block__humidity"},[e._v("Humidity: "+e._s(a.averageHumidity.toFixed(2))+"%")]),t("p",{staticClass:"block__wind"},[e._v("Wind Speed: "+e._s(a.averageWindSpeed.toFixed(2))+" m/s")])])})),0)])]):e._e(),t("div",{staticClass:"weather-display__chart"},[t("canvas",{ref:"chart"})])])},R=[],j=a(6170),U={props:{weatherData:{type:Object,default:null,required:!1}},data(){return{currentView:"day",windowWidth:window.innerWidth}},computed:{currentCityName(){return this.weatherData.city.name},filteredWeatherToday(){const e=(new Date).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric"});return this.weatherData?this.weatherData.list.filter((t=>{const a=new Date(t.dt_txt).toLocaleDateString(void 0,{day:"numeric",month:"numeric",year:"numeric"});return a===e})).map((e=>({dt:e.dt_txt,main:{temp:e.main.temp,feelsLike:e.main.feels_like,humidity:e.main.humidity},wind:e.wind.speed}))):[]},averageWeatherToday(){if(0===this.filteredWeatherToday.length)return{};const e=this.filteredWeatherToday.map((e=>e.main.temp)),t=this.filteredWeatherToday.map((e=>e.main.feelsLike)),a=this.filteredWeatherToday.map((e=>e.main.humidity)),s=this.filteredWeatherToday.map((e=>e.wind));return{avgTemp:this.calculateAverage(e),avgFeelsLike:this.calculateAverage(t),minHumidity:Math.min(...a),maxHumidity:Math.max(...a),avgWind:this.calculateAverage(s),minWind:Math.min(...s),maxWind:Math.max(...s)}},weeklyAverage(){const e=this.weatherData.list.reduce(((e,t)=>{const a=new Date(t.dt_txt).toLocaleDateString("en-US",{weekday:"short"});return e[a]=e[a]||{totalTemp:0,totalFeelsLike:0,totalHumidity:0,totalWind:0,count:0,thisDay:t.dt_txt},e[a].totalTemp+=t.main.temp,e[a].totalFeelsLike+=t.main.feels_like,e[a].totalHumidity+=t.main.humidity,e[a].totalWind+=t.wind.speed,e[a].count+=1,e}),{});return Object.entries(e).reduce(((e,[t,{totalTemp:a,totalFeelsLike:s,totalHumidity:n,totalWind:i,count:o,thisDay:r}])=>(e[t]={averageTemp:a/o,averageFeelsLike:s/o,averageHumidity:n/o,averageWindSpeed:i/o,day:r},e)),{})}},methods:{calculateAverage(e){if(0===e.length)return 0;const t=e.reduce(((e,t)=>e+t),0);return t/e.length},formatTime(e){const t=new Date(1e3*e);return t.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})},switchView(e){this.currentView=e,this.chart&&this.chart.destroy(),this.renderChart()},renderChart(){const e=this.$refs.chart.getContext("2d");"day"===this.currentView?this.renderDayChart(e):this.renderWeekChart(e)},renderDayChart(e){this.chart=new j.kL(e,{type:"line",data:{labels:this.filteredWeatherToday.map((e=>new Date(e.dt).getHours())),datasets:[{label:"Temperature",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,data:this.filteredWeatherToday.map((e=>e.main.temp))}]},options:{scales:{x:{type:"linear",position:"bottom",title:{display:!0,text:"Hours"}},y:{type:"linear",position:"left",title:{display:!0,text:"Temperature (°C)"}}}}})},renderWeekChart(e){const t=this.weatherData.list.map((e=>new Date(e.dt_txt).toLocaleDateString())),a=Array.from(new Set(t),(e=>e)),s=Object.values(this.weeklyAverage).map((e=>e.averageTemp));this.chart=new j.kL(e,{type:"line",data:{labels:a,datasets:[{label:"Temperature",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,data:s}]},options:{scales:{x:{type:"category",position:"bottom",title:{display:!0,text:"Date"}},y:{type:"linear",position:"left",title:{display:!0,text:"Temperature (°C)"}}}}})},windowWidhtChange(){this.windowWidth=window.innerWidth}},mounted(){this.renderChart(),window.addEventListener("resize",this.windowWidhtChange)},beforeDestroy(){window.removeEventListener("resize",this.windowWidhtChange)},watch:{weatherData:{handler(){"day"===this.currentView?(this.chart.data.datasets[0].data=this.filteredWeatherToday.map((e=>e.main.temp)),this.chart.data.labels=this.filteredWeatherToday.map((e=>new Date(e.dt).getHours()))):(this.chart.data.datasets[0].data=this.weatherData.list.map((e=>e.main.temp)),this.chart.data.labels=this.weatherData.list.map((e=>new Date(e.dt_txt).toLocaleDateString()))),this.chart.update()},deep:!0}}},E=U,B=(0,l.Z)(E,N,R,!1,null,"df84cec0",null),J=B.exports,q=function(){var e=this;e._self._c;return e._m(0)},Y=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"loading-spinner"},[t("img",{attrs:{src:a(5522),alt:"loading-spinner"}})])}],z={name:"LoadingSpinner"},X=z,G=(0,l.Z)(X,q,Y,!1,null,"762337f8",null),K=G.exports,Q={components:{CitySearchInput:H,WeatherDisplay:J,CustomModal:$,LoadingSpinner:K},props:{displayInput:{type:Boolean,default:!0},chosenCity:{type:String,default:null},chosenPage:{type:Boolean,default:!1},componentIndex:{type:Number,default:null}},data(){return{weatherData:null,displayLoadSpinner:!1,currentUsersCity:null}},methods:{handleWeatherData(e){this.weatherData=e},deleteComponent(){this.chosenPage&&this.$emit("delete-chosen-component",this.componentIndex),this.$emit("delete-component")},async getCurrentUsersCity(){const e="436cd60a69bf64";try{const t=await k.Z.get(`https://ipinfo.io?token=${e}`),{city:a}=t.data;return a}catch(t){return console.error("Error fetching geolocation data:",t.message),null}},async getChosenCity(){const e="d5c10c96e44dec1bad116a142f8a817c";this.displayLoadSpinner=!0;try{this.currentUsersCity=await this.getCurrentUsersCity();const t=this.chosenPage||0!==this.componentIndex?this.chosenCity:this.currentUsersCity,a=`https://api.openweathermap.org/data/2.5/forecast?q=${encodeURIComponent(t)}&units=metric&appid=${e}`,s=await k.Z.get(a);this.displayLoadSpinner=!1,this.weatherData=s.data}catch(t){this.$emit("open-modal",`Seems something went wrong. We will check what could be the issue. ${t}`)}}},created(){(0===this.componentIndex||this.chosenPage)&&this.getChosenCity()}},ee=Q,te=(0,l.Z)(ee,g,_,!1,null,"6e22c779",null),ae=te.exports,se={components:{WeatherComponent:ae,CustomModal:$},data(){return{components:[ae],indexForDelete:null}},methods:{createNewComponent(){this.components.length<5?this.components.push({component:ae,hash:(new Date).getTime()}):this.$emit("open-modal","You can't have more than 5 charts at the same time. Delete one if you want to add new.")},triggerDeleteComponentModal(e){this.indexForDelete=e,this.$emit("open-modal","")},deleteComponent(){this.components.splice(this.indexForDelete,1),this.$refs.modalRef.closeModal()}}},ne=se,ie=(0,l.Z)(ne,C,f,!1,null,"f1b18456",null),oe=ie.exports,re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"weather-chosen"},[t("custom-modal",{ref:"modalRef"},[t("div",[t("div",[e._v(" Are you sure that you want to delete this component? ")]),t("button",{staticClass:"modal-delete-btn",on:{click:e.deleteComponent}},[e._v(" Yes ")])])]),e._l(e.weatherComponents,(function(a,s){return t("weather-component",{key:s.toString()+a,staticClass:"weather-component",attrs:{componentIndex:s,chosenPage:!0,chosenCity:a,displayInput:!1},on:{"delete-chosen-component":e.triggerDeleteComponentModal}})})),e.showEmptyPage?t("div",{staticClass:"empty-chosen-page"},[t("span",[e._v("Seems you don't have Chosen cities at that moment")])]):e._e()],2)},le=[],de={name:"WeatherChosen",components:{WeatherComponent:ae,CustomModal:$},data(){return{weatherComponents:[],showEmptyPage:!1,indexForDelete:null}},methods:{triggerDeleteComponentModal(e){this.indexForDelete=e,this.$emit("open-modal","")},deleteComponent(){const e=localStorage.getItem("chosenCities"),t=JSON.parse(e);t.splice(this.indexForDelete,1),this.weatherComponents=t,this.weatherComponents.length?this.showEmptyPage=!1:this.showEmptyPage=!0,localStorage.setItem("chosenCities",JSON.stringify(t)),this.$refs.modalRef.closeModal()}},beforeMount(){let e=localStorage.getItem("chosenCities");e?this.weatherComponents=JSON.parse(e):this.showEmptyPage=!0}},ce=de,he=(0,l.Z)(ce,re,le,!1,null,"d2b0e898",null),pe=he.exports;s.ZP.use(y.ZP);const ue=[{path:"/",name:"Weather page",component:oe},{path:"/chosen",name:"Chosen page",component:pe}],me=new y.ZP({routes:ue});var we=me;a(6972);s.ZP.config.productionTip=!1,new s.ZP({render:e=>e(w),router:we}).$mount("#app")},5522:function(e,t,a){e.exports=a.p+"img/spinner.2b96c1c3.svg"},695:function(e,t,a){e.exports=a.p+"img/owl-logo.f90440c7.jpg"}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,n,i){if(!s){var o=1/0;for(c=0;c<e.length;c++){s=e[c][0],n=e[c][1],i=e[c][2];for(var r=!0,l=0;l<s.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(r=!1,i<o&&(o=i));if(r){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[s,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var n,i,o=s[0],r=s[1],l=s[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var c=l(a)}for(t&&t(s);d<o.length;d++)i=o[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},s=self["webpackChunkfeather_weather"]=self["webpackChunkfeather_weather"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(2570)}));s=a.O(s)})();
//# sourceMappingURL=app.f6f59242.js.map